{"version":3,"sources":["components/login/login.ts"],"names":[],"mappings":";;;;;;;YACA;gBAWI,eAAmB,MAAiB,EACjB,MAAgC,EAChC,EAAO;oBAFP,WAAM,GAAN,MAAM,CAAW;oBACjB,WAAM,GAAN,MAAM,CAA0B;oBAChC,OAAE,GAAF,EAAE,CAAK;gBAE1B,CAAC;gBAED,6DAA6D;gBAC7D,6BAAa,GAAb,UAAc,KAAa,EAAE,QAAgB;oBACzC,IAAI,MAAM,GAAQ,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;oBAC9D,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE;wBAChE,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,sCAAsC,CAAC;wBAC7D,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;oBACzB,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;oBAEV,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,mBAAmB,EAAE,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,GAAQ;wBACzF,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,KAAK,aAAa,CAAC,CAAC,CAAC;4BAC7B,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,KAAK,GAAG,oBAAoB,CAAC;wBACrD,CAAC;wBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,KAAK,oBAAoB,CAAC,CAAC,CAAC;4BAC3C,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,4CAA4C,CAAC;wBACrE,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACJ,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;4BACtB,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,6DAA6D,CAAC;wBACtF,CAAC;oBACL,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;gBACd,CAAC;gBAED,qBAAK,GAAL,UAAM,KAAa,EAAE,QAAgB;oBACjC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,cAAc,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;gBACrG,CAAC;gBAED,6BAAa,GAAb;oBACI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC9E,CAAC;gBAED,2BAAW,GAAX;oBACI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC5E,CAAC;gBAED,uBAAO,GAAP,UAAQ,MAAW;oBACf,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE;wBACjC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC;oBACjC,CAAC,EAAE,IAAI,CAAC,CAAC;oBACT,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,GAAQ;wBACnF,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,KAAK,oBAAoB,CAAC,CAAC,CAAC;4BACpC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,4CAA4C,CAAC;wBACrE,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACJ,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;4BACtB,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,yDAAyD,CAAC;wBAClF,CAAC;oBACL,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;gBACd,CAAC;gBArDM,aAAO,GAAkB;oBAC5B,QAAQ,EAAE,QAAQ,EAAE,IAAI;iBAC3B,CAAA;gBAoDL,YAAC;YAAD,CA9DA,AA8DC,IAAA;YAED,oBAAe,OAAO,CAAC,MAAM,CAAC,sBAAsB,EAAE,EAErD,CAAC,CAAC,SAAS,CAAC,SAAS,EAAE;gBACpB,UAAU,EAAC,KAAK;gBAChB,WAAW,EAAE,mCAAmC;aACnD,CAAC,EAAC","file":"components/login/login.js","sourcesContent":["\nclass Login {\n    \n    // Class properties\n    email: string;\n    password: string;\n    confirm: string;\n    createMode: boolean;\n    \n    static $inject: Array<string> = [\n        '$scope', '$state', 'db'\n    ]\n    constructor(public $scope: ng.IScope, \n                public $state: angular.ui.IStateService, \n                public db: any) {\n        \n    }\n        \n    // Create FB email and password account and then sign user in\n    createAccount(email: string, password: string): void {\n        var handle: any = this.db.session.createUser(email, password);\n        handle.once(handle.EVENTS.USER_CREATED, this.db.$apply(this.$scope, function (): any {\n            this.$scope.message = 'User \" + email + \" has been created.';\n            this.onLogin(handle);\n        }), this);\n\n        handle.once(handle.EVENTS.USER_CREATE_ERRORED, this.db.$apply(this.$scope, function (err: any): any {\n            if (err.code === 'EMAIL_TAKEN') {\n                this.$scope.error = email + ' is not available.';\n            } else if (err.code === 'BAD_EMAIL_PASSWORD') {\n                this.$scope.error = 'Please enter a valid email and/or password';\n            } else {\n                console.log(err.code);\n                this.$scope.error = 'User account could not be created.  Please try again later.';\n            }\n        }), this);\n    }\n    \n    login(email: string, password: string): void {\n        this.onLogin(this.db.session.login(this.db.session.LOGIN_TYPES.EMAIL_PASSWORD, email, password));\n    }\n\n    loginFacebook(): void {\n        this.onLogin(this.db.session.login(this.db.session.LOGIN_TYPES.FACEBOOK));\n    }\n\n    loginGoogle(): void {\n        this.onLogin(this.db.session.login(this.db.session.LOGIN_TYPES.GOOGLE));\n    }\n    \n    onLogin(handle: any): void {\n        handle.once(handle.EVENTS.LOGGED_IN, function (): any {\n            this.$state.go('flightplan');\n        }, this);\n        handle.once(handle.EVENTS.LOGIN_ERRORED, this.db.$apply(this.$scope, function (err: any): any {\n            if (err.code === 'BAD_EMAIL_PASSWORD') {\n                this.$scope.error = 'Please enter a valid email and/or password';\n            } else {\n                console.log(err.code);\n                this.$scope.error = 'An error occurred during login. Please try again later.';\n            }\n        }), this);\n    }\n}\n\nexport default angular.module('DroneSense.Web.Login', [\n    \n]).component('dsLogin', {\n    controller:Login,\n    templateUrl: './app/components/login/login.html'\n});"],"sourceRoot":"/source/"}