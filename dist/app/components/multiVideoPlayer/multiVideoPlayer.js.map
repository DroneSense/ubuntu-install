{"version":3,"sources":["components/multiVideoPlayer/multiVideoPlayer.ts"],"names":[],"mappings":"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","file":"components/multiVideoPlayer/multiVideoPlayer.js","sourcesContent":["import { FlightControlSettings } from '../flightControlViewer/flightControlSettings';\nimport { SessionController } from '../flightControlViewer/sessionController';\nimport { MapSession } from '../flightControlViewer/mapSession';\nimport  VideoFeed from './videoFeed';\n\nexport interface IMultiVideoPlayer extends ng.IScope {\n\n}\n\nclass feed {\n\n    showing: boolean = true;\n\n    constructor(public name: string, public ip: string) {\n\n    }\n}\n\nclass MultiVideoPlayer {\n\n    // Server settings\n    settings: FlightControlSettings;\n\n    sessionController: SessionController;\n\n    // Callback to exit full screen\n    onExitFullScreen: () => {};\n    \n    // Callback to enter full screen\n    onFullScreen: () => {};\n\n    // Object to manage video feeds\n    videoFeeds: Array<feed> = [];\n\n    // Flag to track if map is visible\n    showMap: boolean = true;\n\n    // Flag to track if we are showing a video\n    showingVideo: boolean = false;\n\n    playerWidth: string = '469px';\n    playerHeight: string = '264px';\n    top: string = '115px';\n    right: string = '64px';\n    zindex: string = '0';\n\n    // Constructor\n    static $inject: Array<string> = [\n        '$scope'\n    ];\n    constructor(public bindings: IMultiVideoPlayer) {\n        \n    }\n\n    $onInit(): void {\n\n        /* !web-start */\n\n        // Wire up session added event so we can create a video feed for it\n        this.sessionController.eventing.on('session-added', (session: MapSession) => {\n            \n            // Create video feed\n            this.videoFeeds.push(new feed(session.name, this.settings.localVideoServerIP));\n\n            // Switch active video feed\n            for (var index: number = 0; index < this.videoFeeds.length; index++) {\n                var f: feed = this.videoFeeds[index];\n                \n                if (f.name === session.name) {\n                    f.showing = true;\n                } else {\n                    f.showing = false;\n                }\n            }\n            \n        });\n\n        this.sessionController.eventing.on('session-changed', (session: MapSession) => {\n            \n            // Switch active video feed\n            for (var index: number = 0; index < this.videoFeeds.length; index++) {\n                var feed: feed = this.videoFeeds[index];\n                \n                if (feed.name === session.name) {\n                    feed.showing = true;\n                } else {\n                    feed.showing = false;\n                }\n            }\n        });\n\n        /* !web-stop */\n\n    }\n\n    $onDestroy(): void {\n        // Unwire events\n        this.sessionController.eventing.off('session-added');\n        this.sessionController.eventing.off('session-changed');\n    }\n\n    showVideo(): void {\n        \n        try {\n\n            // check if in full screen mode by looking at map visibility flag\n            if (!this.showMap) {\n                this.showMap = true;\n\n\n                /* !web-start */\n                this.playerWidth = '469px';\n                this.playerHeight = '264px';\n                this.right = '64px';\n                this.top = '115px';\n                this.zindex = '0';\n                this.onExitFullScreen();\n                //this.player.stop();\n                this.showingVideo = false;\n                /* !web-stop */\n\n                return;\n            }\n\n            // Check if \n            if (this.showingVideo) {\n                this.showingVideo = false;\n\n                /* !web-start */\n                //this.player.stop();\n                /* !web-stop */\n\n\n            } else {\n                this.showingVideo = true;\n\n\n                /* !web-start */\n                //this.player.play();\n                /* !web-stop */\n            }\n\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    showFullScreen(): void {\n        \n        try {\n\n\n            /* !web-start */\n            this.playerWidth = '100%';\n            this.playerHeight = '100%';\n            this.right = '0px';\n            this.top = '0px';\n            this.zindex = '-1';\n            this.onFullScreen();\n            this.showMap = false;\n            /* !web-stop */\n        \n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n}\n\nexport default angular.module('DroneSense.Web.MultiVideoPlayer', [\n    VideoFeed.name\n]).component('dsMultiVideoPlayer', {\n    bindings: {\n        onFullScreen: '&',\n        onExitFullScreen: '&',\n        settings: '<',\n        sessionName: '<',\n        sessionController: '<'\n    },\n    controller: MultiVideoPlayer,\n    templateUrl: './app/components/multiVideoPlayer/multiVideoPlayer.html'\n});\n"],"sourceRoot":"/source/"}