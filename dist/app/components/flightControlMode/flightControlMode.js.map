{"version":3,"sources":["components/flightControlMode/flightControlMode.ts"],"names":[],"mappings":"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","file":"components/flightControlMode/flightControlMode.js","sourcesContent":["import { } from '@dronesense/model';\nimport { SessionController } from '../flightControlViewer/sessionController';\nimport { OwnerMapSession } from '../flightControlViewer/MapSession';\nimport { IDrone } from '@dronesense/core/lib/common/IDrone';\nimport { SystemStatus } from '@dronesense/core/lib/common/enums/SystemStatus';\nimport { FlightMode } from '@dronesense/core/lib/common/enums/FlightMode';\nimport { ISystem } from '@dronesense/core/lib/common/entities/ISystem';\nimport { IGuidedWaypoint } from '@dronesense/core/lib/common/entities/IGuidedWaypoint';\n\nexport interface IFlightControlMode extends ng.IScope {\n    $ctrl: any;\n\n    // Flag to show RTL button\n    rtlButtonVisible: boolean;\n\n    // Flag to show guided mode button\n    guidedModeButtonVisible: boolean;\n    changeToGuidedModeButtonVisible: boolean;\n\n    // Flag to show manual mode button\n    manualModeButtonVisible: boolean;\n    changeToManualModeButtonVisible: boolean;\n\n    // RTL mode button visibility\n    rtlModeButtonVisible: boolean;\n    rtlIndicatorVisible: boolean;\n\n    // Flag to show takeoff command button\n    takeoffButtonVisible: boolean;\n    takeoffIndicatorVisible: boolean;\n\n    // Flag to show the flight resume button\n    resumeButtonVisible: boolean;\n    resumeIndicatorVisible: boolean;\n\n    // Flag to show the flight pause button\n    pauseButtonVisible: boolean;\n    pauseIndicatorVisible: boolean;\n\n    // Flag to show the set new home point button\n    setNewHomePointButtonVisible: boolean;\n\n    // Flag to show the change altitude button\n    changeAltitudeButtonVisible: boolean;\n\n    // Add waypoint button visible\n    addWaypointButtonVisible: boolean;\n\n    getTakeoffAltitudeVisible: boolean;\n\n    getChangeAltitudeVisible: boolean;\n\n    changeAltitudeValue: number;\n\n    waypointAddActive: boolean;\n\n    showWaypointDialog: boolean;\n\n}\n\nclass FlightControlMode {\n\n    // Flag to show RTL button\n    rtlButtonVisible: boolean = false;\n    rtlIndicatorVisible: boolean = false;\n\n    // Flag to show guided mode button\n    guidedModeButtonVisible: boolean = false;\n\n    changeToGuidedModeButtonVisible: boolean = false;\n\n    // Flag to show manual mode button\n    manualModeButtonVisible: boolean = false;\n\n    changeToManualModeButtonVisible: boolean = false;\n\n    // RTL mode button visibility\n    rtlModeButtonVisible: boolean = false;\n\n    // Flag to show takeoff command button\n    takeoffButtonVisible: boolean = false;\n\n    // Flag to show the flight resume button\n    resumeButtonVisible: boolean = false;\n    resumeIndicatorVisible: boolean = false;\n\n    // Flag to show the flight pause button\n    pauseButtonVisible: boolean = false;\n    pauseIndicatorVisible: boolean = false;\n\n    // Flag to show the set new home point button\n    setNewHomePointButtonVisible: boolean = false;\n\n    // Flag to show the change altitude button\n    changeAltitudeButtonVisible: boolean = false;\n\n    // Add waypoint button visible\n    addWaypointButtonVisible: boolean = false;\n\n    // Flag whether get altitude is visible\n    getTakeoffAltitudeVisible: boolean = false;\n\n    // Flag whether change altitude dialog is visible\n    getChangeAltitudeVisible: boolean = false;\n\n    modesOpen: boolean = false;\n\n    // Current session controller\n    sessionController: SessionController;\n\n    // Current drone for session\n    drone: IDrone;\n\n    // Current drone status\n    status: SystemStatus;\n\n    // Current flight mode\n    flightMode: FlightMode;\n\n    // Flag to indicate if drone is armed\n    armed: boolean;\n\n    // Current mode state\n    currentMode: IMode;\n\n    // Manual Mode\n    manualMode: ManualMode = new ManualMode(this.bindings.$ctrl);\n\n    // Guided Mode\n    guidedMode: GuidedMode = new GuidedMode(this.bindings.$ctrl);\n\n    // RTL Mode\n    rtlMode: RTLMode = new RTLMode(this.bindings.$ctrl);\n\n    waypointAddActive: boolean = false;\n\n    showWaypointDialog: boolean = false;\n    waypointAltitudeValue: number = 50;\n    waypointSpeedValue: number = 5;\n    waypointFlyToNow: boolean = false;\n\n    sessionColor: string;\n\n    // Constructor\n    static $inject: Array<string> = [\n        '$scope'\n    ];\n    constructor(public bindings: IFlightControlMode) {\n\n        this.sessionController.eventing.on('session-added', (ownerSession: OwnerMapSession) => {\n            \n            this.sessionColor = ownerSession.color;\n            this.drone = ownerSession.mapDrone.drone;\n            this.status = this.drone.FlightController.Telemetry.System.status;\n            this.flightMode = this.drone.FlightController.Telemetry.System.flightMode;\n\n            this.setFlightModeState();\n\n            this.drone.FlightController.Telemetry.on('System', (value: ISystem) => {\n                \n                // Check if status has changed\n                if (this.status !== value.status) {\n                    \n                    // Set new status\n                    this.status = value.status;\n\n                    // Check to see if current mode has been set\n                    if (this.currentMode) {\n                        this.currentMode.handleStatusChange(this.status);\n                    }\n                }\n\n                // Check if flight mode has changed\n                if (this.flightMode !== value.flightMode) {\n                    // Set new status\n                    this.flightMode = value.flightMode;\n\n                    // Set current flight mode\n                    this.setFlightModeState();                    \n                }\n\n                if (this.armed !== value.armed) {\n\n                }\n\n            });\n\n            this.bindings.$applyAsync();\n\n        });\n\n        this.sessionController.eventing.on('map-loaded', () => {\n            this.initializeMapMouseHandler();\n        });\n    }\n\n    setManualMode(): void {\n        this.drone.FlightController.setFlightMode(FlightMode.Loiter).then( () => {\n\n        }).catch((error) => {\n\n        });\n    }\n\n    setGuidedMode(): void {\n        this.drone.FlightController.setFlightMode(FlightMode.Guided).then( () => {\n\n        }).catch((error) => {\n\n        });\n    }\n\n    setFlightModeState(): void {\n        \n        if (this.currentMode) {\n            this.currentMode.teardownUI();\n            this.bindings.$applyAsync();\n        }\n\n        switch (this.flightMode) {\n            case FlightMode.Loiter:\n                this.currentMode = this.manualMode;\n                break;\n            case FlightMode.Stabilize:\n                this.currentMode = this.manualMode;\n                break;\n            case FlightMode.AltHold:\n                this.currentMode = this.manualMode;\n                break;\n            case FlightMode.Guided:\n                this.currentMode = this.guidedMode;\n                break;\n            case FlightMode.RTL:\n                this.currentMode = this.rtlMode;\n                break;\n            default:\n                this.currentMode = null;\n                break;\n        }\n\n        if (this.currentMode) {\n            this.currentMode.initialize(this.status, this.flightMode, this.drone);\n            this.currentMode.setupUI();\n            this.bindings.$applyAsync();\n        }\n\n    }\n\n    rtl(): void {\n        this.rtlIndicatorVisible = true;\n        this.currentMode.handleButtonClick(ButtonActions.RTL);\n    }\n\n    takeoff(): void {\n        this.currentMode.handleButtonClick(ButtonActions.Takeoff);\n    }\n\n    resume(): void {\n        this.resumeIndicatorVisible = true;\n        this.currentMode.handleButtonClick(ButtonActions.Resume);\n    }\n\n    pause(): void {\n        this.pauseIndicatorVisible = true;\n        this.currentMode.handleButtonClick(ButtonActions.Pause);\n    }\n\n    setHomePoint(): void {\n        this.currentMode.handleButtonClick(ButtonActions.SetHomePoint);\n    }\n\n    changeAltitude(): void {\n        this.currentMode.handleButtonClick(ButtonActions.ChangeAltitude);\n    }\n\n    addWaypoint(): void {\n        if (!this.mouseHandler) {\n            console.log('initialize mouse handler');\n            this.initializeMapMouseHandler();\n        }\n\n        if (this.waypointAddActive) {\n            this.waypointAddActive = false;\n        } else {\n            this.showWaypointDialog = true;\n        }\n\n    }\n\n    takeoffAltitude: number = 50;\n    takeoffToAltitude(): void {\n\n        this.drone.FlightController.takeoff(this.takeoffAltitude).then(() => {\n\n        }).catch((error) => {\n            console.log(error);\n        });\n\n        this.getTakeoffAltitudeVisible = false;\n    }\n\n    cancelTakeoff(): void {\n        this.getTakeoffAltitudeVisible = false;\n    }\n\n    changeAltitudeValue: number;\n    changeAltitudeTo(): void {\n\n        this.drone.FlightController.Guided.setAcceptanceRadius(1);\n\n        this.drone.FlightController.Guided.addWaypoint({\n            lattitude: this.drone.FlightController.Telemetry.Position.lattitude,\n            longitude: this.drone.FlightController.Telemetry.Position.longitude,\n            altitude: this.changeAltitudeValue,\n            speed: 5,\n            name: this.getNextName()\n        }, true).then(() => {\n\n        }).catch((error) => {\n            console.log(error);\n        });\n\n        this.getChangeAltitudeVisible = false;\n    }\n\n    cancelChangeAltitude(): void {\n        this.getChangeAltitudeVisible = false;\n    }\n\n    closeWaypointDialog(): void {\n        this.showWaypointDialog = false;\n    }\n\n    setWaypointsActive(): void {\n        this.closeWaypointDialog();\n        this.waypointAddActive = true;\n    }\n\n    mouseHandler: Cesium.ScreenSpaceEventHandler;\n    initializeMapMouseHandler(): void {\n\n            // wire up left mouse click event\n        this.mouseHandler = new Cesium.ScreenSpaceEventHandler(this.sessionController.map.canvas, false);\n\n        this.mouseHandler.setInputAction((click: any) => {\n                this.handleMouseClick(click);\n            },\n            Cesium.ScreenSpaceEventType.LEFT_CLICK\n        );\n    }\n\n    handleMouseClick(click: any): void {\n\n        if (!this.waypointAddActive) {\n            return;\n        }\n\n        let start: any = new Date().getTime();\n\n        var ray: any = this.sessionController.map.camera.getPickRay(click.position);\n        var position: any = this.sessionController.map.scene.globe.pick(ray, this.sessionController.map.scene);\n        //console.log(position);\n        if (Cesium.defined(position)) {\n            // Make the height of the position = 0 so it works with groundPrimitive\n            var positionCartographic: Cesium.Cartographic = this.sessionController.map.scene.globe.ellipsoid.cartesianToCartographic(position);\n            positionCartographic.height = 0;\n            //position = this.map.scene.globe.ellipsoid.cartographicToCartesian(positionCartographic);\n\n            //var cartographic: Cesium.Cartographic = Cesium.Cartographic.fromCartesian(position);\n            var longitudeString: number = Cesium.Math.toDegrees(positionCartographic.longitude);\n            var latitudeString: number = Cesium.Math.toDegrees(positionCartographic.latitude);\n\n            this.drone.FlightController.Guided.addWaypoint({\n                lattitude: latitudeString,\n                longitude: longitudeString,\n                altitude: this.waypointAltitudeValue,\n                speed: this.waypointSpeedValue,\n                name: this.getNextName()\n            }, this.waypointFlyToNow).then(() => {\n                // console.log('waypoing added callback');\n\n                let end: any = new Date().getTime();\n                let time: any = end - start;\n                console.log('Execution time: ' + time);\n            });\n\n            // console.log(latitudeString + ':' + longitudeString);\n\n            // var terrainProvider: any = new Cesium.CesiumTerrainProvider({\n            //     url: 'https://www.cesiumcontent.com/api/terrain/world?access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJkMTM4ZDE2OS05NWYwLTQ0YmItOWY3YS0yNjEwOGE5Y2Y3NjYiLCJpZCI6NywiaWF0IjoxNDU1MjkyNzg5fQ.NDKlrwQZE_04ntDuL89hvatEmuycQo5llhtz3Mi6Wo0'\n            //     //url: '//assets.agi.com/stk-terrain/world'\n            // });\n            // var positions: Array<Cesium.Cartographic> = [\n            //     Cesium.Cartographic.fromDegrees(longitudeString, latitudeString)\n            // ];\n\n            // // Get terrain height at click location before adding takeoff point\n            // Cesium.sampleTerrain(terrainProvider, 15, positions).then((updatedPositions: any): void => {\n            //     console.log(updatedPositions[0].height);\n\n            // });\n        }\n    }\n\n    wayPointNames: Array<string> = ['A', 'B', 'C', 'D', 'E', 'F', 'G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z', 'AA', 'AB', 'AC', 'AD', 'AE', 'AF', 'AG','AH','AI','AJ','AK','AL','AM','AN','AO','AP','AQ','AR','AS','AT','AU','AV','AW','AX','AY','AZ',];\n    nextNameIndex: number = 0;\n\n    getNextName(): string {\n        let current: number = this.nextNameIndex;\n        this.nextNameIndex++;\n        return this.wayPointNames[current];\n    }\n}\n\nenum ButtonActions {\n    Takeoff,\n    RTL,\n    Resume,\n    Pause,\n    SetHomePoint,\n    ChangeAltitude,\n    AddWaypoint\n}\n\ninterface IMode {\n\n    setupUI(): void;\n    teardownUI(): void;\n    handleButtonClick(button: ButtonActions): void;\n    handleStatusChange(systemStatus: SystemStatus): void;\n    initialize(systemStatus: SystemStatus, flightMode: FlightMode, drone: IDrone): void;\n}\n\nclass GuidedMode implements IMode {\n    \n    systemStatus: SystemStatus;\n    flightMode: FlightMode;\n    drone: IDrone;\n\n    constructor(public flightControlMode: IFlightControlMode) {\n\n    }\n\n    initialize(systemStatus: SystemStatus, flightMode: FlightMode, drone: IDrone): void {\n        this.systemStatus = systemStatus;\n        this.flightMode = flightMode;\n        this.drone = drone;\n\n        // this.drone.FlightController.Guided.on('waypoint-added', (wayPoint: IGuidedWaypoint, index: number) => {\n        //     console.log('waypoint-added: ' + index + ':' + wayPoint);\n        // });\n\n        // this.drone.FlightController.Guided.on('waypoint-removed', (index: number) => {\n        //     console.log('waypoint-removed: ' + index);\n        // });\n\n        // this.drone.FlightController.Guided.on('waypoints-changed', () => {\n        //     console.log('waypoints-changed');\n        // });\n\n        this.drone.FlightController.Telemetry.on('System', (value: ISystem) => {\n            this.flightControlMode.pauseButtonVisible = !value.paused;\n            this.flightControlMode.resumeButtonVisible = value.paused;\n\n            this.flightControlMode.pauseIndicatorVisible = false;\n            this.flightControlMode.resumeIndicatorVisible = false;\n        });\n\n        // this.drone.FlightController.Guided.on('playback-paused', () => {\n        //     this.flightControlMode.pauseButtonVisible = false;\n        //     this.flightControlMode.resumeButtonVisible = true;\n        // });\n\n        // this.drone.FlightController.Guided.on('playback-resumed', () => {\n        //     this.flightControlMode.resumeButtonVisible = false;\n        //     this.flightControlMode.pauseButtonVisible = true;\n        // });\n\n        // this.drone.FlightController.Guided.on('waypoint-error', (index: number, error: any) => {\n        //     console.log('waypoint-error: ' + index);\n        // });\n\n        // this.drone.FlightController.Guided.on('waypoint-started', (index: number) => {\n        //     console.log('waypoint-started: ' + index);\n        // });\n\n        // this.drone.FlightController.Guided.on('waypoint-reached', (index: number) => {\n        //     console.log('waypoint-reached: ' + index);\n        // });\n        \n    }\n\n    setupUI(): void {\n        // Turn on primary mode on/off buttons\n        this.flightControlMode.guidedModeButtonVisible = true;\n        this.flightControlMode.changeToManualModeButtonVisible = true;\n        this.flightControlMode.addWaypointButtonVisible = true;\n        this.flightControlMode.setNewHomePointButtonVisible = true;\n\n        // Let status change handle status specific buttons\n        this.handleStatusChange(this.systemStatus);\n\n    }\n\n    teardownUI(): void {\n        this.flightControlMode.guidedModeButtonVisible = false;\n        this.flightControlMode.setNewHomePointButtonVisible = false;\n        this.flightControlMode.rtlButtonVisible = false;\n        this.flightControlMode.changeAltitudeButtonVisible = false;\n        this.flightControlMode.pauseButtonVisible = false;\n        this.flightControlMode.resumeButtonVisible = false;\n        this.flightControlMode.takeoffButtonVisible = false;\n        this.flightControlMode.changeToManualModeButtonVisible = false;\n        this.flightControlMode.addWaypointButtonVisible = false;\n    }\n\n    handleButtonClick(button: ButtonActions): void {\n\n        switch (button) {\n            case ButtonActions.RTL:\n                this.drone.FlightController.setFlightMode(FlightMode.RTL).then(() => {\n\n                }).catch((error) => {\n                    // TODO: handle error changing modes\n                });\n                break;\n            case ButtonActions.SetHomePoint:\n                //this.drone.FlightController.setHomePoint(lat/lng);\n                break;\n            case ButtonActions.ChangeAltitude:\n                this.flightControlMode.changeAltitudeValue = this.drone.FlightController.Telemetry.Position.altitudeAGL;\n                this.flightControlMode.getChangeAltitudeVisible = true;\n                break;\n            case ButtonActions.Pause:\n                this.drone.FlightController.pause(true).then(() => {\n                    \n                }).catch((error) => {\n                    console.log(error);\n                });\n                break;\n            case ButtonActions.Resume:\n                this.drone.FlightController.pause(false).then(() => {\n\n                }).catch((error) => {\n                    console.log(error);\n                });\n                break;\n            case ButtonActions.Takeoff:\n                this.flightControlMode.getTakeoffAltitudeVisible = true;\n                break;\n            case ButtonActions.AddWaypoint:\n                // handled in flight control mode controller for now\n                break;\n        \n            default:\n                break;\n        }\n    }\n\n    handleStatusChange(systemStatus: SystemStatus): void {\n        switch (systemStatus) {\n            // System is active and might be already airborne. Motors are engaged.\n            case SystemStatus.Active:\n                this.flightControlMode.rtlButtonVisible = true;\n                this.flightControlMode.changeAltitudeButtonVisible = true;\n                this.flightControlMode.pauseButtonVisible = true;\n                this.flightControlMode.setNewHomePointButtonVisible = true;\n\n                this.flightControlMode.takeoffButtonVisible = false;\n                break;\n            // System is booting up.\n            case SystemStatus.Booting:\n                this.flightControlMode.rtlButtonVisible = false;\n                break;\n            // System is calibrating and not flight-ready.\n            case SystemStatus.Calibrating:\n                this.flightControlMode.rtlButtonVisible = false;\n                break;\n            // System is in a non-normal flight mode. It can however still navigate.\n            case SystemStatus.Critical:\n                this.flightControlMode.rtlButtonVisible = true;\n                break;\n            // System is in a non-normal flight mode. It lost control over parts or over the whole airframe. It is in mayday and going down.\n            case SystemStatus.Emergency:\n                this.flightControlMode.rtlButtonVisible = true;\n                break;\n            // System just initialized its power-down sequence, will shut down now.\n            case SystemStatus.PowerOff:\n                this.flightControlMode.rtlButtonVisible = false;\n                break;\n            // System is grounded and on standby. It can be launched any time.\n            case SystemStatus.Standby:\n                this.flightControlMode.rtlButtonVisible = false;\n                this.flightControlMode.takeoffButtonVisible = true;\n                break;\n            // Uninitialized system, state is unknown.\n            case SystemStatus.Unknown:\n                this.flightControlMode.rtlButtonVisible = false;\n                break;\n            default:\n                break;\n        }\n    }\n}\n\nclass RTLMode implements IMode {\n\n    systemStatus: SystemStatus;\n    flightMode: FlightMode;\n    drone: IDrone;\n\n    constructor(public flightControlMode: IFlightControlMode) {\n\n    }\n\n    initialize(systemStatus: SystemStatus, flightMode: FlightMode, drone: IDrone): void {\n        this.systemStatus = systemStatus;\n        this.flightMode = flightMode;\n        this.drone = drone;\n    }\n\n    setupUI(): void {\n        this.flightControlMode.rtlIndicatorVisible = false;\n        // Turn on primary mode on/off buttons\n        this.flightControlMode.rtlModeButtonVisible = true;\n\n        this.flightControlMode.changeToManualModeButtonVisible = true;\n        this.flightControlMode.changeToGuidedModeButtonVisible = true;\n\n        // Let status change handle status specific buttons\n        this.handleStatusChange(this.systemStatus);\n    }\n\n    teardownUI(): void {\n        this.flightControlMode.rtlModeButtonVisible = false;\n        this.flightControlMode.pauseButtonVisible = false;\n\n        this.flightControlMode.changeToManualModeButtonVisible = false;\n        this.flightControlMode.changeToGuidedModeButtonVisible = false;\n    }\n\n    handleButtonClick(button: ButtonActions): void {\n        switch (button) {\n            case ButtonActions.Pause:\n                this.drone.FlightController.setFlightMode(FlightMode.Guided).then(() => {\n\n                }).catch((error) => {\n                    console.log(error);\n                });\n                break;        \n            default:\n                break;\n        }\n    }\n\n    handleStatusChange(systemStatus: SystemStatus): void {\n        switch (systemStatus) {\n            // System is active and might be already airborne. Motors are engaged.\n            case SystemStatus.Active:\n                this.flightControlMode.pauseButtonVisible = true;\n                break;\n            // System is booting up.\n            case SystemStatus.Booting:\n\n                break;\n            // System is calibrating and not flight-ready.\n            case SystemStatus.Calibrating:\n\n                break;\n            // System is in a non-normal flight mode. It can however still navigate.\n            case SystemStatus.Critical:\n\n                break;\n            // System is in a non-normal flight mode. It lost control over parts or over the whole airframe. It is in mayday and going down.\n            case SystemStatus.Emergency:\n\n                break;\n            // System just initialized its power-down sequence, will shut down now.\n            case SystemStatus.PowerOff:\n\n                break;\n            // System is grounded and on standby. It can be launched any time.\n            case SystemStatus.Standby:\n                this.flightControlMode.pauseButtonVisible = false;\n                break;\n            // Uninitialized system, state is unknown.\n            case SystemStatus.Unknown:\n\n                break;\n            default:\n                break;\n        }\n    }\n}\n\nclass ManualMode implements IMode {\n\n    systemStatus: SystemStatus;\n    flightMode: FlightMode;\n    drone: IDrone;\n\n    constructor(public flightControlMode: IFlightControlMode) {\n\n    }\n\n    initialize(systemStatus: SystemStatus, flightMode: FlightMode, drone: IDrone): void {\n        this.systemStatus = systemStatus;\n        this.flightMode = flightMode;\n        this.drone = drone;\n    }\n\n    setupUI(): void {\n        // Turn on primary mode on/off buttons\n        this.flightControlMode.manualModeButtonVisible = true;\n        this.flightControlMode.setNewHomePointButtonVisible = true;\n        this.flightControlMode.changeToGuidedModeButtonVisible = true;\n\n        // Let status change handle status specific buttons\n        this.handleStatusChange(this.systemStatus);\n    }\n\n    teardownUI(): void {\n        this.flightControlMode.manualModeButtonVisible = false;\n        this.flightControlMode.setNewHomePointButtonVisible = false;\n        this.flightControlMode.rtlButtonVisible = false;\n        this.flightControlMode.changeToGuidedModeButtonVisible = false;\n    }\n\n    handleButtonClick(button: ButtonActions): void {\n\n        switch (button) {\n            case ButtonActions.RTL:\n                this.drone.FlightController.setFlightMode(FlightMode.RTL).then(() => {\n\n                }).catch((error) => {\n                    // TODO: handle error changing modes\n                });\n                break;\n            case ButtonActions.SetHomePoint:\n                //this.drone.FlightController.setHomePoint(lat/lng);\n                break;\n        \n            default:\n                break;\n        }\n    }\n\n    handleStatusChange(systemStatus: SystemStatus): void {\n        switch (systemStatus) {\n            // System is active and might be already airborne. Motors are engaged.\n            case SystemStatus.Active:\n                this.flightControlMode.rtlButtonVisible = true;\n                break;\n            // System is booting up.\n            case SystemStatus.Booting:\n                this.flightControlMode.rtlButtonVisible = false;\n                break;\n            // System is calibrating and not flight-ready.\n            case SystemStatus.Calibrating:\n                this.flightControlMode.rtlButtonVisible = false;\n                break;\n            // System is in a non-normal flight mode. It can however still navigate.\n            case SystemStatus.Critical:\n                this.flightControlMode.rtlButtonVisible = true;\n                break;\n            // System is in a non-normal flight mode. It lost control over parts or over the whole airframe. It is in mayday and going down.\n            case SystemStatus.Emergency:\n                this.flightControlMode.rtlButtonVisible = true;\n                break;\n            // System just initialized its power-down sequence, will shut down now.\n            case SystemStatus.PowerOff:\n                this.flightControlMode.rtlButtonVisible = false;\n                break;\n            // System is grounded and on standby. It can be launched any time.\n            case SystemStatus.Standby:\n                this.flightControlMode.rtlButtonVisible = false;\n                break;\n            // Uninitialized system, state is unknown.\n            case SystemStatus.Unknown:\n                this.flightControlMode.rtlButtonVisible = false;\n                break;\n            default:\n                break;\n        }\n    }\n}\n\nexport default angular.module('DroneSense.Web.FlightControlMode', [\n\n]).component('dsFlightControlMode', {\n    bindings: {\n        sessionController: '<'\n    },\n    controller: FlightControlMode,\n    templateUrl: './app/components/flightControlMode/flightControlMode.html'\n});\n"],"sourceRoot":"/source/"}